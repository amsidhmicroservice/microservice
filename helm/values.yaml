forwarder:
  ## @param forwarder.enabled Enable forwarder daemonset
  ##
  enabled: true
  ## @param forwarder.image.registry Fluentd forwarder image registry override
  ## @param forwarder.image.repository Fluentd forwarder image repository override
  ## @param forwarder.image.tag Fluentd forwarder image tag override (immutable tags are recommended)
  image:
    registry: ""
    repository: ""
    tag: ""
  ## @param forwarder.daemonUser Forwarder daemon user and group (set to root by default because it reads from host paths)
  ##
  daemonUser: root
  ## @param forwarder.daemonGroup Fluentd forwarder daemon system group
  ##
  daemonGroup: root
  ## @param forwarder.hostAliases Add deployment host aliases
  ## https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
  ##
  hostAliases: []
  ## K8s Security Context for forwarder pods
  ## https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  ## @param forwarder.podSecurityContext.enabled Enable security context for forwarder pods
  ## @param forwarder.podSecurityContext.runAsUser User ID for forwarder's containers
  ## @param forwarder.podSecurityContext.runAsGroup Group ID for forwarder's containers
  ## @param forwarder.podSecurityContext.fsGroup Group ID for forwarder's containers filesystem
  ##
  podSecurityContext:
    enabled: true
    runAsUser: 0
    runAsGroup: 0
    fsGroup: 0
  ## K8s Security Context for forwarder container
  ## https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  ## @param forwarder.containerSecurityContext.enabled Enable security context for the forwarder container
  ## @param forwarder.containerSecurityContext.privileged Run as privileged
  ## @param forwarder.containerSecurityContext.allowPrivilegeEscalation Allow Privilege Escalation
  ## @param forwarder.containerSecurityContext.readOnlyRootFilesystem Require the use of a read only root file system
  ## @param forwarder.containerSecurityContext.capabilities.drop [array] Drop capabilities for the securityContext
  ##
  containerSecurityContext:
    enabled: true
    privileged: false
    allowPrivilegeEscalation: false
    ## Requires mounting an `extraVolume` of type `emptyDir` into /tmp
    ##
    readOnlyRootFilesystem: false
    capabilities:
      drop:
        - ALL
  ## @param forwarder.hostNetwork Enable use of host network
  ##
  hostNetwork: false
  ## @param forwarder.dnsPolicy Pod-specific DNS policy
  ##
  dnsPolicy: ""
  ## @param forwarder.terminationGracePeriodSeconds Duration in seconds the pod needs to terminate gracefully
  ## https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/
  ##
  terminationGracePeriodSeconds: 30
  ## @param forwarder.configFile Name of the config file that will be used by Fluentd at launch under the `/opt/bitnami/fluentd/conf` directory
  ##
  configFile: fluentd.conf
  ## @param forwarder.configMap Name of the config map that contains the Fluentd configuration files
  ## If not specified, one will be created by default
  ##
  configMap: ""
  ## @param forwarder.configMapFiles [object] Files to be added to be config map. Ignored if `forwarder.configMap` is set
  ##
  configMapFiles:
    fluentd.conf: |
      ################################################################
      # This source gets all logs from local docker host
      <label @FLUENT_LOG>
        <match fluent.**>
          @type null
        </match>
      </label>
      
      <source>
        @type tail
        @id in_tail_container_logs
        path /var/log/containers/counter*.log,/var/log/containers/*ms*.log,/var/log/containers/currency*.log
        exclude_path /var/log/containers/*fluentd*.log,/var/log/containers/*kibana*.log,/var/log/containers/*elastic*.log
        pos_file /opt/bitnami/fluentd/logs/buffers/fluentd-docker.pos
        tag kubernetes.*
        read_from_head true
        <parse>
          @type multi_format
          <pattern>
            format json
            time_key @timestamp
            time_format %Y-%m-%dT%H:%M:%S.%NZ
          </pattern>
          <pattern>
            format none
            message_key logMessage
          </pattern>
        </parse>
      </source>
      
      <filter kubernetes.**>
        @id filter_kubernetes_metadata
        @type kubernetes_metadata
      </filter>
      
      <match kubernetes.**>
        @type copy
        <store>
          @type file
          path /data/output
        </store>
      
        #<store>
        #  @type stdout
        #</store>
      
        <store>
          @type elasticsearch
          @log_level info
          include_tag_key true
      
          host quickstart-es-internal-http
          port 9200
          user elastic
          password 41v78I1f0jz0MnfXXm26azc4
          #cloud_id 25622abc63444ebc814b306bfaea1009:dXMtY2VudHJhbDEuZ2NwLmNsb3VkLmVzLmlvJGRhN2FmMzgzMzVlNjQwMWM5OGI3YTMxN2E3NjM1NTQ1JDI2YTA1YjljM2Y1NjRhOWRhZDY0OTZmYTcyNDk4MjY4
          #cloud_auth 'elastic:2K4zlo7oz4a4857m3VspAf1v'
          scheme https
          ssl_verify false
      
          reload_connections true
          logstash_format true
          logstash_prefix microservice
          logstash_dateformat %Y-%m-%d
        </store>
      </match>

  ## @param forwarder.extraArgs Extra arguments for the Fluentd command line
  ## ref: https://docs.fluentd.org/deployment/command-line-option
  ##
  extraArgs: ""
  ## @param forwarder.extraEnvVars Extra environment variables to pass to the container
  ## extraEnvVars:
  ##   - name: MY_ENV_VAR
  ##     value: my_value
  ##
  extraEnvVars: []
  ## @param forwarder.extraEnvVarsCM Name of existing ConfigMap containing extra env vars for Fluentd Forwarder nodes
  ##
  extraEnvVarsCM: ""
  ## @param forwarder.extraEnvVarsSecret Name of existing Secret containing extra env vars for Fluentd Forwarder nodes
  ##
  extraEnvVarsSecret: ""
  ## @param forwarder.containerPorts [array] Ports the forwarder containers will listen on
  ##
  containerPorts:
    ## - name: syslog-tcp
    ##   containerPort: 5140
    ##   protocol: TCP
    ## - name: syslog-udp
    ##   containerPort: 5140
    ##   protocol: UDP
    ## - name: tcp
    ##   containerPort: 24224
    ##   protocol: TCP
    - name: http
      containerPort: 9880
      protocol: TCP
  ## Service parameters
  ##
  service:
    ## @param forwarder.service.type Kubernetes service type (`ClusterIP`, `NodePort`, or `LoadBalancer`) for the forwarders
    ##
    type: ClusterIP
    ## @param forwarder.service.ports [object] Array containing the forwarder service ports
    ##
    ports:
      ## syslog-udp:
      ##   port: 5140
      ##   targetPort: syslog-udp
      ##   protocol: UDP
      ##   nodePort: 31514
      ## syslog-tcp:
      ##   port: 5140
      ##   targetPort: syslog-tcp
      ##   protocol: TCP
      ##   nodePort: 31514
      ## tcp:
      ##   port: 24224
      ##   targetPort: tcp
      ##   protocol: TCP
      http:
        port: 9880
        targetPort: http
        protocol: TCP
    ## @param forwarder.service.loadBalancerIP loadBalancerIP if service type is `LoadBalancer` (optional, cloud specific)
    ## ref: https://kubernetes.io/docs/user-guide/services/#type-loadbalancer
    ##
    loadBalancerIP: ""
    ## @param forwarder.service.loadBalancerSourceRanges Addresses that are allowed when service is LoadBalancer
    ## https://kubernetes.io/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/#restrict-access-for-loadbalancer-service
    ##
    ## loadBalancerSourceRanges:
    ##   - 10.10.10.0/24
    ##
    loadBalancerSourceRanges: []
    ## @param forwarder.service.externalTrafficPolicy Fluentd Forwarder service external traffic policy
    ## ref http://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/#preserving-the-client-source-ip
    ##
    externalTrafficPolicy: Cluster
    ## @param forwarder.service.clusterIP Static clusterIP or None for headless services
    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#choosing-your-own-ip-address
    ## e.g:
    ## clusterIP: None
    ##
    clusterIP: ""
    ## @param forwarder.service.annotations Provide any additional annotations which may be required
    ##
    annotations: {}
    ## @param forwarder.service.sessionAffinity Session Affinity for Kubernetes service, can be "None" or "ClientIP"
    ## If "ClientIP", consecutive client requests will be directed to the same Pod
    ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#virtual-ips-and-service-proxies
    ##
    sessionAffinity: None
    ## @param forwarder.service.sessionAffinityConfig Additional settings for the sessionAffinity
    ## sessionAffinityConfig:
    ##   clientIP:
    ##     timeoutSeconds: 300
    ##
    sessionAffinityConfig: {}

  ## Configure extra options for startup probe
  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
  ## @param forwarder.startupProbe.enabled Enable startupProbe
  ## @param forwarder.startupProbe.httpGet.path Request path for startupProbe
  ## @param forwarder.startupProbe.httpGet.port Port for startupProbe
  ## @param forwarder.startupProbe.initialDelaySeconds Initial delay seconds for startupProbe
  ## @param forwarder.startupProbe.periodSeconds Period seconds for startupProbe
  ## @param forwarder.startupProbe.timeoutSeconds Timeout seconds for startupProbe
  ## @param forwarder.startupProbe.failureThreshold Failure threshold for startupProbe
  ## @param forwarder.startupProbe.successThreshold Success threshold for startupProbe
  ##
  startupProbe:
    enabled: false
    httpGet:
      path: /fluentd.healthcheck?json=%7B%22ping%22%3A+%22pong%22%7D
      port: http
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
    successThreshold: 1
  ## Configure extra options for liveness probe
  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
  ## @param forwarder.livenessProbe.enabled Enable livenessProbe
  ## @param forwarder.livenessProbe.httpGet.path Request path for livenessProbe
  ## @param forwarder.livenessProbe.httpGet.port Port for livenessProbe
  ## @param forwarder.livenessProbe.initialDelaySeconds Initial delay seconds for livenessProbe
  ## @param forwarder.livenessProbe.periodSeconds Period seconds for livenessProbe
  ## @param forwarder.livenessProbe.timeoutSeconds Timeout seconds for livenessProbe
  ## @param forwarder.livenessProbe.failureThreshold Failure threshold for livenessProbe
  ## @param forwarder.livenessProbe.successThreshold Success threshold for livenessProbe
  ##
  livenessProbe:
    enabled: true
    httpGet:
      path: /fluentd.healthcheck?json=%7B%22ping%22%3A+%22pong%22%7D
      port: http
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
    successThreshold: 1
  ## Configure extra options for readiness probe
  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/#configure-probes
  ## @param forwarder.readinessProbe.enabled Enable readinessProbe
  ## @param forwarder.readinessProbe.httpGet.path Request path for readinessProbe
  ## @param forwarder.readinessProbe.httpGet.port Port for readinessProbe
  ## @param forwarder.readinessProbe.initialDelaySeconds Initial delay seconds for readinessProbe
  ## @param forwarder.readinessProbe.periodSeconds Period seconds for readinessProbe
  ## @param forwarder.readinessProbe.timeoutSeconds Timeout seconds for readinessProbe
  ## @param forwarder.readinessProbe.failureThreshold Failure threshold for readinessProbe
  ## @param forwarder.readinessProbe.successThreshold Success threshold for readinessProbe
  ##
  readinessProbe:
    enabled: true
    httpGet:
      path: /fluentd.healthcheck?json=%7B%22ping%22%3A+%22pong%22%7D
      port: http
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
    successThreshold: 1
  ## @param forwarder.customStartupProbe Custom liveness probe for the Fluend Forwarder
  ##
  customStartupProbe: {}
  ## @param forwarder.customLivenessProbe Custom liveness probe for the Fluend Forwarder
  ##
  customLivenessProbe: {}
  ## @param forwarder.customReadinessProbe Custom rediness probe for the Fluend Forwarder
  ##
  customReadinessProbe: {}

  ## @param forwarder.updateStrategy.type Set up update strategy.
  ## ref: https://kubernetes.io/docs/tasks/manage-daemon/update-daemon-set/#daemonset-update-strategy
  ## Example:
  ## updateStrategy:
  ##  type: RollingUpdate
  ##  rollingUpdate:
  ##    maxSurge: 25%
  ##    maxUnavailable: 25%
  ##
  updateStrategy:
    type: RollingUpdate
  ## Forwarder containers' resource requests and limits
  ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
  ## We usually recommend not to specify default resources and to leave this as a conscious
  ## choice for the user. This also increases chances charts run on environments with little
  ## resources, such as Minikube. If you do want to specify resources, uncomment the following
  ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  ## @param forwarder.resources.limits The resources limits for the container
  ## @param forwarder.resources.requests The requested resources for the container
  ##
  resources:
    ## Example:
    ## limits:
    ##    cpu: 500m
    ##    memory: 1Gi
    limits: {}
    ## Examples:
    ## requests:
    ##    cpu: 300m
    ##    memory: 512Mi
    requests: {}
  ## @param forwarder.priorityClassName Set Priority Class Name to allow priority control over other pods
  ## ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/
  ##
  priorityClassName: ""
  ## @param forwarder.schedulerName Name of the k8s scheduler (other than default)
  ## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/
  ##
  schedulerName: ""
  ## @param forwarder.topologySpreadConstraints Topology Spread Constraints for pod assignment
  ## https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/
  ## The value is evaluated as a template
  ##
  topologySpreadConstraints: []
  ## @param forwarder.podAffinityPreset Forwarder Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
  ## ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
  ##
  podAffinityPreset: ""
  ## @param forwarder.podAntiAffinityPreset Forwarder Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity
  ##
  podAntiAffinityPreset: ""
  ## Node affinity preset
  ## Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity
  ##
  nodeAffinityPreset:
    ## @param forwarder.nodeAffinityPreset.type Forwarder Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`
    ##
    type: ""
    ## @param forwarder.nodeAffinityPreset.key Forwarder Node label key to match Ignored if `affinity` is set.
    ## E.g.
    ## key: "kubernetes.io/e2e-az-name"
    ##
    key: ""
    ## @param forwarder.nodeAffinityPreset.values Forwarder Node label values to match. Ignored if `affinity` is set.
    ## E.g.
    ## values:
    ##   - e2e-az1
    ##   - e2e-az2
    ##
    values: []
  ## @param forwarder.affinity Forwarder Affinity for pod assignment
  ## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
  ## Note: podAffinityPreset, podAntiAffinityPreset, and  nodeAffinityPreset will be ignored when it's set
  ##
  affinity: {}
  ## @param forwarder.nodeSelector Forwarder Node labels for pod assignment
  ## Ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}
  ## @param forwarder.tolerations Forwarder Tolerations for pod assignment
  ## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
  ##
  tolerations: []
  ## @param forwarder.podAnnotations Pod annotations
  ## ref: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
  ##
  podAnnotations: {}
  ## @param forwarder.podLabels Extra labels to add to Pod
  ##
  podLabels: {}
  ## Pods Service Account
  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
  ##
  serviceAccount:
    ## @param forwarder.serviceAccount.create Specify whether a ServiceAccount should be created.
    ##
    create: true
    ## @param forwarder.serviceAccount.name The name of the ServiceAccount to create
    ## If not set and create is true, a name is generated using the common.names.fullname template
    name: ""
    ## @param forwarder.serviceAccount.annotations Additional Service Account annotations (evaluated as a template)
    ##
    annotations: {}
    ## @param forwarder.serviceAccount.automountServiceAccountToken Automount service account token for the server service account
    ##
    automountServiceAccountToken: true

  ## Role Based Access
  ## ref: https://kubernetes.io/docs/admin/authorization/rbac/
  ## @param forwarder.rbac.create Specify whether RBAC resources should be created and used, allowing the get, watch and list of pods/namespaces
  ## @param forwarder.rbac.pspEnabled Whether to create a PodSecurityPolicy and bound it with RBAC. WARNING: PodSecurityPolicy is deprecated in Kubernetes v1.21 or later, unavailable in v1.25 or later
  ##
  rbac:
    create: true
    pspEnabled: false
  ## Persist data to a persistent volume
  ##
  persistence:
    ## @param forwarder.persistence.enabled Enable persistence volume for the forwarder
    ##
    enabled: false
    ## @param forwarder.persistence.hostPath.path Directory from the host node's filesystem to mount as hostPath volume for persistence.
    ## The host directory you chose is mounted into /opt/bitnami/fluentd/logs/buffers in your Pod
    ## Example use case: mount host directory /tmp/buffer (if the directory doesn't exist, it creates it) into forwarder pod.
    ##   persistence:
    ##     enabled: true
    ##     hostPath:
    ##       path: /tmp/buffer
    ##
    hostPath:
      path: /opt/bitnami/fluentd/logs/buffers
  ## @param forwarder.command Override default container command (useful when using custom images)
  ##
  command: []
  ## @param forwarder.args Override default container args (useful when using custom images)
  ##
  args: []
  ## @param forwarder.lifecycleHooks Additional lifecycles to add to the pods
  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/
  ## e.g:
  ## postStart:
  ##   exec:
  ##     command: ["/bin/sh", "-c", "echo Hello from the postStart handler > /usr/share/message"]
  ## preStop:
  ##   exec:
  ##     command: ["/bin/sh","-c","nginx -s quit; while killall -0 nginx; do sleep 1; done"]
  ##
  lifecycleHooks: {}
  ## @param forwarder.initContainers Additional init containers to add to the pods
  ## For example:
  ## initContainers:
  ##   - name: your-image-name
  ##     image: your-image
  ##     imagePullPolicy: Always
  ##
  initContainers: []
  ## @param forwarder.sidecars Add sidecars to forwarder pods
  ##
  ## For example:
  ## sidecars:
  ##   - name: your-image-name
  ##     image: your-image
  ##     imagePullPolicy: Always
  ##     ports:
  ##       - name: portname
  ##         containerPort: 1234
  ##
  sidecars: []
  ## @param forwarder.extraVolumes Extra volumes
  ## Example Use Case: mount systemd journal volume
  ##  - name: systemd
  ##      hostPath:
  ##        path: /run/log/journal/
  ##
  extraVolumes: []
  ## @param forwarder.extraVolumeMounts Mount extra volume(s)
  ##   - name: systemd
  ##     mountPath: /run/log/journal/
  ##
  extraVolumeMounts: []
  ## @param forwarder.initScripts Dictionary of init scripts. Evaluated as a template.
  ## Specify dictionary of scripts to be run at first boot
  ## Alternatively, you can put your scripts under the files/docker-entrypoint-initdb.d directory
  ## For example:
  ## initScripts:
  ##   my_init_script.sh: |
  ##      #!/bin/sh
  ##      echo "Do something."
  ##
  initScripts: {}
  ## @param forwarder.initScriptsCM ConfigMap with the init scripts. Evaluated as a template.
  ## Note: This will override initScripts
  ##
  initScriptsCM: ""
  ## @param forwarder.initScriptsSecret Secret containing `/docker-entrypoint-initdb.d` scripts to be executed at initialization time that contain sensitive data. Evaluated as a template.
  ##
  initScriptsSecret: ""
