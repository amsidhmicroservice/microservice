apiVersion: skaffold/v2beta18
kind: Config

deploy:
  #kubectl:
  #  manifests:
  #    - deployment/devtool/gateway/1-ingress-controller.yaml
  #    - deployment/devtool/gateway/2-ingress-gateway.yaml

  helm:
    releases:
      - name: elasticsearch-chart
        remoteChart: bitnami/elasticsearch
        upgradeOnChange: true
        namespace: monitoring
        createNamespace: true
        setValues:
          image:
            registry: docker.io
            repository: bitnami/elasticsearch
            tag: 8.6.0
          global:
            kibanaEnabled: true
          security:
            enabled: true
            elasticPassword: elastic@123  #Password for elastic user
            tls:
              autoGenerated: true
          master:
            persistence:
              size: 2Gi
          data:
            persistence:
              size: 2Gi
          service:
            type: LoadBalancer


profiles:
  # use the cloudbuild profile to build images using Google Cloud Build
  - name: cloudbuild
    build:
      googleCloudBuild: { }
